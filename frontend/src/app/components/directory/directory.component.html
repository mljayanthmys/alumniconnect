<div class="directory-page">
  <div class="container py-5">
    <!-- Header -->
    <div class="page-header text-center mb-5">
      <h1 class="display-4 fw-bold">ðŸ‘¥ Alumni Directory</h1>
      <p class="lead">Browse and connect with our amazing alumni community</p>
    </div>

    <!-- Search and Filter Section -->
    <div class="search-filter-section mb-5">
      <div class="row g-3">
        <div class="col-md-4">
          <input 
            type="text" 
            class="form-control form-control-lg" 
            placeholder="ðŸ” Search by name..."
            [(ngModel)]="searchTerm"
            (input)="onSearch()">
        </div>
        <div class="col-md-3">
          <select 
            class="form-select form-control-lg" 
            [(ngModel)]="selectedBatch"
            (change)="onFilterChange()">
            <option value="">All Batches</option>
            <option value="2024">2024</option>
            <option value="2023">2023</option>
            <option value="2022">2022</option>
            <option value="2021">2021</option>
            <option value="2020">2020</option>
          </select>
        </div>
        <div class="col-md-3">
          <input 
            type="text" 
            class="form-control form-control-lg" 
            placeholder="Filter by company..."
            [(ngModel)]="companyFilter"
            (input)="onFilterChange()">
        </div>
        <div class="col-md-2">
          <button class="btn btn-outline-secondary btn-lg w-100" (click)="clearFilters()">
            Clear
          </button>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3 text-muted">Loading alumni profiles...</p>
    </div>

    <!-- Alumni Count -->
    <div *ngIf="!loading" class="mb-4">
      <p class="text-muted">
        <strong>{{ alumniList.length }}</strong> alumni found
      </p>
    </div>

    <!-- Alumni Cards Grid -->
    <div *ngIf="!loading && alumniList.length > 0" class="row g-4">
      <div class="col-md-6 col-lg-4" *ngFor="let alumni of alumniList">
        <div class="alumni-card">
          <div class="card-header-custom">
            <div class="alumni-avatar">
              {{ getInitials(alumni.name) }}
            </div>
            <span *ngIf="alumni.isVerified" class="verified-badge" title="Verified Alumni">
              âœ“
            </span>
          </div>
          <div class="card-body">
            <h5 class="card-title">{{ alumni.name }}</h5>
            <p class="text-muted mb-2">
              <i class="bi bi-calendar"></i> Batch {{ alumni.batch }}
            </p>
            <p class="company-info">
              <i class="bi bi-building"></i> {{ alumni.currentCompany }}
            </p>
            <p class="text-muted mb-2">
              <i class="bi bi-briefcase"></i> {{ alumni.jobRole }}
            </p>
            <p class="text-muted mb-3">
              <i class="bi bi-geo-alt"></i> {{ alumni.location }}
            </p>
            
            <!-- Skills -->
            <div class="skills-container mb-3" *ngIf="alumni.skills && alumni.skills.length > 0">
              <span class="skill-badge" *ngFor="let skill of alumni.skills.slice(0, 3)">
                {{ skill }}
              </span>
              <span class="skill-badge" *ngIf="alumni.skills.length > 3">
                +{{ alumni.skills.length - 3 }}
              </span>
            </div>

            <div class="d-flex gap-2">
              <button class="btn btn-primary btn-sm flex-fill" (click)="viewProfile(alumni._id!)">
                <i class="bi bi-eye"></i> View Profile
              </button>
              <button class="btn btn-outline-primary btn-sm" *ngIf="alumni.linkedIn" 
                      (click)="openLinkedIn(alumni.linkedIn)">
                <i class="bi bi-linkedin"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- No Results -->
    <div *ngIf="!loading && alumniList.length === 0" class="text-center py-5">
      <i class="bi bi-inbox" style="font-size: 4rem; color: #ccc;"></i>
      <h4 class="mt-3">No alumni found</h4>
      <p class="text-muted">Try adjusting your search filters</p>
      <button class="btn btn-primary mt-3" routerLink="/register">
        Be the First to Register
      </button>
    </div>
  </div>
</div>